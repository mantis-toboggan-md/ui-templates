{"version":3,"file":"template-aws-formatters-0.1.0.umd.min.formatters.js","mappings":"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","sources":["webpack://template-aws-formatters-0.1.0/./formatters/TemplateCloudCredentialAws.vue","webpack://template-aws-formatters-0.1.0/./formatters/TemplateCloudCredentialAws.vue?ff81","webpack://template-aws-formatters-0.1.0/./.shell/assets/brand/ sync ^\\.\\/.*\\/metadata\\.json$","webpack://template-aws-formatters-0.1.0/./formatters/TemplateAwsRegion.vue","webpack://template-aws-formatters-0.1.0/./formatters/TemplateAwsRegion.vue?30e1","webpack://template-aws-formatters-0.1.0/./formatters/TemplateAwsVpc.vue","webpack://template-aws-formatters-0.1.0/./formatters/TemplateAwsVpc.vue?039d"],"sourcesContent":["<!-- eslint-disable @typescript-eslint/no-empty-function -->\n<script>\nimport SelectCredential from '@shell/edit/provisioning.cattle.io.cluster/SelectCredential.vue';\n\nexport default {\n  name: 'AWSCredentialTemplateFormatter',\n\n  emits: ['update:value', 'validation-passed'],\n\n  components: { SelectCredential },\n\n  props: {\n    value: {\n      type:    [Object, Array, Number, String, Boolean],\n      default: null\n    },\n\n    variableDefinition: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    uitemplate: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    globalVariableConfiguration: {\n      type:    Array,\n      default: () => []\n    },\n\n    resourceConfiguration: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    registerBeforeHook: {\n      type:    Function,\n      default: () => {}\n    },\n\n    registerAfterHook: {\n      type:    Function,\n      default: () => {}\n    }\n  }\n};\n</script>\n\n<template>\n  <SelectCredential\n    class=\"mr-20\"\n    :value=\"value\"\n    mode=\"create\"\n    provider=\"aws\"\n    :default-on-cancel=\"true\"\n    :showing-form=\"true\"\n    :cancel=\"cancelCredential\"\n    @update:value=\"e=>$emit('update:value', e)\"\n  />\n</template>\n","import { render } from \"./TemplateCloudCredentialAws.vue?vue&type=template&id=0d7140c5\"\nimport script from \"./TemplateCloudCredentialAws.vue?vue&type=script&lang=js\"\nexport * from \"./TemplateCloudCredentialAws.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var map = {\n\t\"./classic/metadata.json\": 9621,\n\t\"./csp/metadata.json\": 6471,\n\t\"./federal/metadata.json\": 1862,\n\t\"./harvester/metadata.json\": 1507,\n\t\"./rgs/metadata.json\": 8401,\n\t\"./suse/metadata.json\": 7259\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1177;","<script>\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nconst CLOUD_CRED_VARIABLE_NAME = 'cloudCredential';\n\nexport default {\n  name: 'AwsRegionTemplateFormatter',\n\n  emits: ['update:value', 'validation-passed'],\n\n  components: { LabeledSelect },\n\n  props: {\n    value: {\n      type:    [Object, Array, Number, String, Boolean],\n      default: null\n    },\n\n    placeholder: {\n      type:    [Object, Array, Number, String, Boolean],\n      default: null\n    },\n\n    variableDefinition: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    uitemplate: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    globalVariableConfiguration: {\n      type:    Array,\n      default: () => []\n    },\n\n    resourceConfiguration: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n  },\n\n  async fetch() {\n    await setTimeout(() => {\n      this.fetchRegionInfo();\n    }, 1000);\n  },\n\n  data() {\n    return { regionInfo: null, loading: false };\n  },\n\n  watch: {\n    cloudCredentialId: {\n      handler() {\n        this.fetchRegionInfo();\n      },\n      immediate: true\n    },\n\n    value: {\n      handler(neu) {\n        if (!neu) {\n          this.$emit('validation-passed', false);\n        } else {\n          this.$emit('validation-passed', true);\n        }\n      },\n      immediate: true\n    },\n\n    globalVariableConfiguration: { deep: true }\n  },\n\n  computed: {\n    credentialId() {\n      return (this.globalVariableConfiguration).find((v) => v.name === CLOUD_CRED_VARIABLE_NAME)?.value;\n    },\n\n    regionOptions() {\n      if ( !this.regionInfo ) {\n        return [];\n      }\n\n      return this.regionInfo.Regions.map((obj) => {\n        return obj.RegionName;\n      }).sort();\n    },\n  },\n\n  methods: {\n    async fetchRegionInfo() {\n      this.loading = true;\n      this.errors = [];\n      if ( !this.credentialId ) {\n        this.loading = false;\n\n        return;\n      }\n\n      try {\n        const region = this.value || this.$store.getters['aws/defaultRegion'];\n\n        if (!this.value && !this.placeholder) {\n          this.$emit('update:value', region);\n        }\n\n        this.ec2Client = await this.$store.dispatch('aws/ec2', { region, cloudCredentialId: this.credentialId });\n\n        this.regionInfo = await this.ec2Client.describeRegions({});\n      } catch (e) {\n        this.errors = exceptionToErrorsArray(e);\n      }\n\n      this.loading = false;\n    }\n  },\n};\n</script>\n\n<template>\n  <div>\n    <LabeledSelect\n      required\n      :placeholder=\"placeholder\"\n      :loading=\"loading\"\n      label=\"AWS Region\"\n      :value=\"value\"\n      :options=\"regionOptions\"\n      @update:value=\"e=>$emit('update:value', e)\"\n    />\n  </div>\n</template>\n","import { render } from \"./TemplateAwsRegion.vue?vue&type=template&id=2c9223bc\"\nimport script from \"./TemplateAwsRegion.vue?vue&type=script&lang=js\"\nexport * from \"./TemplateAwsRegion.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { sortBy } from '@shell/utils/sort';\nimport { addObject, addObjects, findBy } from '@shell/utils/array';\nimport { isEmpty } from '@shell/utils/object';\nconst CLOUD_CRED_VARIABLE_NAME = 'cloudCredential';\n\nexport default {\n  name: 'AwsRegionTemplateFormatter',\n\n  emits: ['update:value', 'validation-passed'],\n\n  components: { LabeledSelect },\n\n  props: {\n    value: {\n      type:    [Object, Array, Number, String, Boolean],\n      default: null\n    },\n\n    placeholder: {\n      type:    [Object, Array, Number, String, Boolean],\n      default: null\n    },\n\n    variableDefinition: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    uitemplate: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    globalVariableConfiguration: {\n      type:    Array,\n      default: () => []\n    },\n\n    resourceConfiguration: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n  },\n\n  async fetch() {\n    await setTimeout(() => {\n      this.fetchVpcInfo();\n    }, 1000);\n  },\n\n  data() {\n    return {\n      vpcInfo: null, loading: false, selectedNetwork: this.value?.vpcId || this.value?.subnetId\n    };\n  },\n\n  watch: {\n    cloudCredentialId: {\n      handler() {\n        this.fetchVpcInfo();\n      },\n      immediate: true\n    },\n\n    region: {\n      handler() {\n        this.fetchVpcInfo();\n      },\n      immediate: true\n    },\n\n    value: {\n      handler(neu) {\n        if (!neu) {\n          this.$emit('validation-passed', false);\n        } else {\n          this.$emit('validation-passed', true);\n        }\n      },\n      immediate: true\n    },\n\n    globalVariableConfiguration: { deep: true }\n  },\n\n  computed: {\n    credentialId() {\n      return (this.globalVariableConfiguration).find((v) => v.name === CLOUD_CRED_VARIABLE_NAME)?.value;\n    },\n\n    region() {\n      return (this.globalVariableConfiguration).find((v) => v.name === 'region')?.value;\n    },\n\n    allNetworkOptions() {\n      if ( !this.vpcInfo || !this.subnetInfo ) {\n        return [];\n      }\n      let vpcs = [];\n      const subnetsByVpc = {};\n\n      for ( const obj of this.vpcInfo.Vpcs ) {\n        const name = obj.Tags && obj.Tags?.length ? obj.Tags.find((t) => t.Key === 'Name')?.Value : null;\n        const hasIpv6 = !!obj.Ipv6CidrBlockAssociationSet && !isEmpty(obj.Ipv6CidrBlockAssociationSet);\n        const hasIpv4 = !!obj.CidrBlock;\n\n        vpcs.push({\n          label:     name || obj.VpcId,\n          subLabel:  name ? obj.VpcId : obj.CidrBlock,\n          isDefault: obj.IsDefault || false,\n          kind:      'vpc',\n          value:     obj.VpcId,\n          // disabled:  this.enableIpv6 !== hasIpv6,\n          hasIpv6,\n          hasIpv4\n        });\n      }\n\n      vpcs = sortBy(vpcs, ['isDefault:desc', 'label']);\n\n      for ( const obj of this.subnetInfo.Subnets ) {\n        if ( obj.AvailabilityZone !== `${ this.region }${ this.zone }` ) {\n          continue;\n        }\n\n        const hasIpv6 = !!obj.Ipv6CidrBlockAssociationSet && !isEmpty(obj.Ipv6CidrBlockAssociationSet);\n        const hasIpv4 = !!obj.CidrBlock;\n\n        // if (this.enableIpv6 !== hasIpv6) {\n        //   continue;\n        // }\n\n        let entry = subnetsByVpc[obj.VpcId];\n\n        if ( !entry ) {\n          entry = [];\n          subnetsByVpc[obj.VpcId] = entry;\n        }\n\n        const name = obj.Tags && obj.Tags?.length ? obj.Tags.find((t) => t.Key === 'Name')?.Value : null;\n\n        entry.push({\n          label:     name || obj.SubnetId,\n          subLabel:  name ? obj.SubnetId : obj.CidrBlock,\n          kind:      'subnet',\n          isDefault: obj.DefaultForAz || false,\n          value:     obj.SubnetId,\n          vpcId:     obj.VpcId,\n          hasIpv6,\n          hasIpv4\n        });\n      }\n\n      const out = [];\n\n      for ( const obj of vpcs ) {\n        if (!obj.disabled || subnetsByVpc[obj.value]) {\n          addObject(out, obj);\n        }\n\n        if ( subnetsByVpc[obj.value] ) {\n          addObjects(out, sortBy(subnetsByVpc[obj.value], ['isDefault:desc', 'label']));\n        }\n      }\n\n      return out;\n    },\n\n  },\n\n  methods: {\n    async fetchVpcInfo() {\n      this.loading = true;\n      this.errors = [];\n      if ( !this.credentialId ) {\n        this.loading = false;\n\n        return;\n      }\n\n      try {\n        const region = this.region || this.$store.getters['aws/defaultRegion'];\n\n        this.ec2Client = await this.$store.dispatch('aws/ec2', { region, cloudCredentialId: this.credentialId });\n\n        this.vpcInfo = await this.ec2Client.describeVpcs({});\n        this.subnetInfo = await this.ec2Client.describeSubnets({});\n      } catch (e) {\n        this.errors = exceptionToErrorsArray(e);\n      }\n\n      this.loading = false;\n    },\n\n    updateNetwork(value) {\n      let obj;\n\n      if ( value ) {\n        obj = findBy(this.allNetworkOptions, 'value', value);\n      }\n\n      if ( obj?.kind === 'subnet' ) {\n        // this.$emit('update:subnetId', value);\n        // this.$emit('update:vpcId', obj.vpcId);\n        this.$emit('update:value', { vpcId: obj.vpcId, subnetId: value });\n        this.selectedNetwork = value;\n      } else if ( obj ) {\n        // this.$emit('update:subnetId', null);\n        // this.$emit('update:vpcId', value);\n        this.$emit('update:value', { vpcId: value, subnetId: null });\n        this.selectedNetwork = value;\n      } else {\n        // this.$emit('update:subnetId', null);\n        // this.$emit('update:vpcId', null);\n        this.$emit('update:value', { vpcId: null, subnetId: null });\n\n        this.selectedNetwork = null;\n      }\n    },\n\n  },\n};\n</script>\n\n<template>\n  <div>\n    <LabeledSelect\n      required\n      :placeholder=\"placeholder?.subnetId || placeholder?.vpcId || ''\"\n      :loading=\"loading\"\n      label=\"Network\"\n      :value=\"selectedNetwork\"\n      :options=\"allNetworkOptions\"\n      @update:value=\"updateNetwork\"\n    />\n  </div>\n</template>\n","import { render } from \"./TemplateAwsVpc.vue?vue&type=template&id=014f10c5\"\nimport script from \"./TemplateAwsVpc.vue?vue&type=script&lang=js\"\nexport * from \"./TemplateAwsVpc.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_SelectCredential","class","value","$props","mode","provider","cancel","_ctx","cancelCredential","_cache","e","$emit","name","emits","components","SelectCredential","props","type","Object","Array","Number","String","Boolean","default","variableDefinition","uitemplate","globalVariableConfiguration","resourceConfiguration","registerBeforeHook","Function","registerAfterHook","__exports__","render","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","Error","code","keys","resolve","module","exports","_createElementBlock","_createVNode","_component_LabeledSelect","required","placeholder","loading","$data","label","options","$options","regionOptions","CLOUD_CRED_VARIABLE_NAME","LabeledSelect","fetch","setTimeout","this","fetchRegionInfo","data","regionInfo","watch","cloudCredentialId","handler","immediate","neu","deep","computed","credentialId","find","v","Regions","obj","RegionName","sort","methods","errors","region","$store","getters","ec2Client","dispatch","describeRegions","exceptionToErrorsArray","subnetId","vpcId","selectedNetwork","allNetworkOptions","updateNetwork","fetchVpcInfo","vpcInfo","subnetInfo","vpcs","subnetsByVpc","Vpcs","Tags","length","t","Key","Value","hasIpv6","Ipv6CidrBlockAssociationSet","isEmpty","hasIpv4","CidrBlock","push","VpcId","subLabel","isDefault","IsDefault","kind","sortBy","Subnets","AvailabilityZone","zone","entry","SubnetId","DefaultForAz","out","disabled","addObject","addObjects","describeVpcs","describeSubnets","findBy"],"ignoreList":[],"sourceRoot":""}