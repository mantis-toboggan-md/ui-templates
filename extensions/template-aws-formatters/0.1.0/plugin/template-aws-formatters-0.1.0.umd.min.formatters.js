(("undefined"!==typeof self?self:this)["webpackChunktemplate_aws_formatters_0_1_0"]=("undefined"!==typeof self?self:this)["webpackChunktemplate_aws_formatters_0_1_0"]||[]).push([[902],{1113:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(9274);function i(e,t,a,i,l,o){const r=(0,n.resolveComponent)("SelectCredential");return(0,n.openBlock)(),(0,n.createBlock)(r,{class:"mr-20",value:a.value,mode:"create",provider:"aws","default-on-cancel":!0,"showing-form":!0,cancel:e.cancelCredential,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("update:value",t))},null,8,["value","cancel"])}var l=a(9388),o={name:"AWSCredentialTemplateFormatter",emits:["update:value","validation-passed"],components:{SelectCredential:l.A},props:{value:{type:[Object,Array,Number,String,Boolean],default:null},variableDefinition:{type:Object,default:()=>({})},uitemplate:{type:Object,default:()=>({})},globalVariableConfiguration:{type:Array,default:()=>[]},resourceConfiguration:{type:Object,default:()=>({})},registerBeforeHook:{type:Function,default:()=>{}},registerAfterHook:{type:Function,default:()=>{}}}},r=a(7433);const s=(0,r.A)(o,[["render",i]]);var d=s},1177:function(e,t,a){var n={"./classic/metadata.json":9621,"./csp/metadata.json":6471,"./federal/metadata.json":1862,"./harvester/metadata.json":1507,"./rgs/metadata.json":8401,"./suse/metadata.json":7259};function i(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=l,e.exports=i,i.id=1177},1812:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var n=a(9274);function i(e,t,a,i,l,o){const r=(0,n.resolveComponent)("LabeledSelect");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(r,{required:"",placeholder:a.placeholder,loading:l.loading,label:"AWS Region",value:a.value,options:o.regionOptions,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("update:value",t))},null,8,["placeholder","loading","value","options"])])}var l=a(9726),o=a(4095);const r="cloudCredential";var s={name:"AwsRegionTemplateFormatter",emits:["update:value","validation-passed"],components:{LabeledSelect:o.A},props:{value:{type:[Object,Array,Number,String,Boolean],default:null},placeholder:{type:[Object,Array,Number,String,Boolean],default:null},variableDefinition:{type:Object,default:()=>({})},uitemplate:{type:Object,default:()=>({})},globalVariableConfiguration:{type:Array,default:()=>[]},resourceConfiguration:{type:Object,default:()=>({})}},async fetch(){await setTimeout(()=>{this.fetchRegionInfo()},1e3)},data(){return{regionInfo:null,loading:!1}},watch:{cloudCredentialId:{handler(){this.fetchRegionInfo()},immediate:!0},value:{handler(e){e?this.$emit("validation-passed",!0):this.$emit("validation-passed",!1)},immediate:!0},globalVariableConfiguration:{deep:!0}},computed:{credentialId(){return this.globalVariableConfiguration.find(e=>e.name===r)?.value},regionOptions(){return this.regionInfo?this.regionInfo.Regions.map(e=>e.RegionName).sort():[]}},methods:{async fetchRegionInfo(){if(this.loading=!0,this.errors=[],this.credentialId){try{const e=this.value||this.$store.getters["aws/defaultRegion"];this.value||this.placeholder||this.$emit("update:value",e),this.ec2Client=await this.$store.dispatch("aws/ec2",{region:e,cloudCredentialId:this.credentialId}),this.regionInfo=await this.ec2Client.describeRegions({})}catch(e){this.errors=(0,l.rz)(e)}this.loading=!1}else this.loading=!1}}},d=a(7433);const u=(0,d.A)(s,[["render",i]]);var c=u},3952:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var n=a(9274);function i(e,t,a,i,l,o){const r=(0,n.resolveComponent)("LabeledSelect");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createVNode)(r,{required:"",placeholder:a.placeholder?.subnetId||a.placeholder?.vpcId||"",loading:l.loading,label:"Network",value:l.selectedNetwork,options:o.allNetworkOptions,"onUpdate:value":o.updateNetwork},null,8,["placeholder","loading","value","options","onUpdate:value"])])}var l=a(9726),o=a(4095),r=a(4302),s=a(8851),d=a(6978);const u="cloudCredential";var c={name:"AwsRegionTemplateFormatter",emits:["update:value","validation-passed"],components:{LabeledSelect:o.A},props:{value:{type:[Object,Array,Number,String,Boolean],default:null},placeholder:{type:[Object,Array,Number,String,Boolean],default:null},variableDefinition:{type:Object,default:()=>({})},uitemplate:{type:Object,default:()=>({})},globalVariableConfiguration:{type:Array,default:()=>[]},resourceConfiguration:{type:Object,default:()=>({})}},async fetch(){await setTimeout(()=>{this.fetchVpcInfo()},1e3)},data(){return{vpcInfo:null,loading:!1,selectedNetwork:this.value?.vpcId||this.value?.subnetId}},watch:{cloudCredentialId:{handler(){this.fetchVpcInfo()},immediate:!0},region:{handler(){this.fetchVpcInfo()},immediate:!0},value:{handler(e){e?this.$emit("validation-passed",!0):this.$emit("validation-passed",!1)},immediate:!0},globalVariableConfiguration:{deep:!0}},computed:{credentialId(){return this.globalVariableConfiguration.find(e=>e.name===u)?.value},region(){return this.globalVariableConfiguration.find(e=>"region"===e.name)?.value},allNetworkOptions(){if(!this.vpcInfo||!this.subnetInfo)return[];let e=[];const t={};for(const n of this.vpcInfo.Vpcs){const t=n.Tags&&n.Tags?.length?n.Tags.find(e=>"Name"===e.Key)?.Value:null,a=!!n.Ipv6CidrBlockAssociationSet&&!(0,d.Im)(n.Ipv6CidrBlockAssociationSet),i=!!n.CidrBlock;e.push({label:t||n.VpcId,subLabel:t?n.VpcId:n.CidrBlock,isDefault:n.IsDefault||!1,kind:"vpc",value:n.VpcId,hasIpv6:a,hasIpv4:i})}e=(0,r.Ul)(e,["isDefault:desc","label"]);for(const n of this.subnetInfo.Subnets){if(n.AvailabilityZone!==`${this.region}${this.zone}`)continue;const e=!!n.Ipv6CidrBlockAssociationSet&&!(0,d.Im)(n.Ipv6CidrBlockAssociationSet),a=!!n.CidrBlock;let i=t[n.VpcId];i||(i=[],t[n.VpcId]=i);const l=n.Tags&&n.Tags?.length?n.Tags.find(e=>"Name"===e.Key)?.Value:null;i.push({label:l||n.SubnetId,subLabel:l?n.SubnetId:n.CidrBlock,kind:"subnet",isDefault:n.DefaultForAz||!1,value:n.SubnetId,vpcId:n.VpcId,hasIpv6:e,hasIpv4:a})}const a=[];for(const n of e)n.disabled&&!t[n.value]||(0,s.PG)(a,n),t[n.value]&&(0,s.cn)(a,(0,r.Ul)(t[n.value],["isDefault:desc","label"]));return a}},methods:{async fetchVpcInfo(){if(this.loading=!0,this.errors=[],this.credentialId){try{const e=this.region||this.$store.getters["aws/defaultRegion"];this.ec2Client=await this.$store.dispatch("aws/ec2",{region:e,cloudCredentialId:this.credentialId}),this.vpcInfo=await this.ec2Client.describeVpcs({}),this.subnetInfo=await this.ec2Client.describeSubnets({})}catch(e){this.errors=(0,l.rz)(e)}this.loading=!1}else this.loading=!1},updateNetwork(e){let t;e&&(t=(0,s.jq)(this.allNetworkOptions,"value",e)),"subnet"===t?.kind?(this.$emit("update:value",{vpcId:t.vpcId,subnetId:e}),this.selectedNetwork=e):t?(this.$emit("update:value",{vpcId:e,subnetId:null}),this.selectedNetwork=e):(this.$emit("update:value",{vpcId:null,subnetId:null}),this.selectedNetwork=null)}}},p=a(7433);const f=(0,p.A)(c,[["render",i]]);var h=f}}]);
//# sourceMappingURL=template-aws-formatters-0.1.0.umd.min.formatters.js.map